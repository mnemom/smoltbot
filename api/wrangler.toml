name = "smoltbot-api"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Custom domain
routes = [
  { pattern = "api.mnemom.ai", custom_domain = true }
]

workers_dev = true

# Secrets (set via wrangler secret put):
# STRIPE_SECRET_KEY      (Stripe API secret key)
# STRIPE_WEBHOOK_SECRET  (Stripe webhook signing secret)
# RESEND_API_KEY         (Resend email API key)
# ANTHROPIC_API_KEY      (Anthropic API key for analysis LLM)
# LICENSE_SIGNING_SECRET (HMAC secret for license JWT signing)
# ED25519_SIGNING_KEY    (Ed25519 private key, hex-encoded, for checkpoint attestation)
# ED25519_KEY_ID         (Key ID for signing key, e.g. "key-001")
# PROVER_URL             (URL of the ZK proving service, e.g. "https://prover.fly.dev")
# PROVER_API_KEY          (API key for the ZK proving service)

# Billing/rate-limit cache â€” create with: wrangler kv:namespace create BILLING_CACHE
# Then fill in the id below.
# [[kv_namespaces]]
# binding = "BILLING_CACHE"
# id = "YOUR_KV_NAMESPACE_ID"

[triggers]
crons = ["0 */6 * * *"]
